# 模块管理器

JS 模块化体系：

- CommonJS，实现为 Node.js
- AMD，实现为 RequireJS，异步导入模块，它管理 JS 脚本的依赖关系，自动加载其它模块。
- CMD，玉伯提出，实现为 SeaJS

CommonJS 定义了奶多普通应用程序（非浏览器）使用的 API，目标是提供类似于 Python/Java 等的标准库。用户可用 CommonJS API 写应用程序。

## 什么是前端模块管理器

本文整理自[阮一峰的网络日志](http://www.ruanyifeng.com/blog/2014/09/package-management.html)

浏览本身不提供模块管理的机制（模块指能独立拆分且通用的代码单元，ECMAScript 5年代没有，ES6内置了），为了调用各个模块，不得不在页面中加入一大堆`<script>`标签。这使得页面臃肿，难以维护，还会产生大量 HTTP 请求，拖慢显示速度，影响用户体验。

前端模块管理器为解决上述问题而生，它可以轻松管理各个JavaScript脚本的依赖关系，自动加载自个模块，使网页结构清晰合理。

最早最知名的前端模块管理器应该是 RequireJS，它采用 AMD 格式，异步加载各种模块。

另几种前端模块管理器：

- Bower
- Browserify
- Component
- Duo

## Bower

它的作用是为模块的安装、升级和删除，提供一种统一、可维护的管理模式。

安装 Bower: `npm install -g bower`。

使用`Bower install`安装各个模块： 

```
bower install jquery
bower install jquery/jquery
bower install git://github.com/user/package.git
bower install http://example.com/script.js
```

安装的意思是指把该模块（及其依赖的模块）下载到当前目录的 bower_components 子目录中。然后：`<script src="/bower_componets/jquery/dist/jquery.min.js">`。

更新模块：`bower update jquery`，如果不给出名字，则更新所有模块。

卸载模块：`bower uninstall jquery`，默认情况会卸载其依赖的模块，除非其依赖的模块仍然被其它模块依赖。

## Browserify

它本身不是模块管理器，只是让服务器端的 CommonJS 模式的模块可以运行在浏览器中。这意味着通过它，可以使用 NodeJS 的 NPM 中的模块。

安装：`npm install -g browserify`。

使用：`browserify nodeScript.js > bundle.js`。生成的 bundle.js 直接通过`<script>`标签插入网页。

Browserify 编译的时候会将服务器端脚本依赖的模块一起编译，这样将多个模块合并成一个文件。

## Component

Component 是 Express 的作者 TJ 开发的模块管理器，是将网页需要的各种资源（脚本、样式、图片、字体等）编译后，放到同一个目录中。已停止开发。

## Duo

基于 Component，功能和 Browserify 相似，并可以编译 CSS，且自动添加浏览器前缀。


## 执行编译与预编译模块化方案的比较

- `seajs / require` 是一种在线"编译" 模块的方案，相当于在页面上加载一个 CMD/AMD 解释器，这样浏览器就认识了 define、exports、module，也就实现了模块化
- `browserify / webpack` 是一个预编译模块的方案，相比于上面 ，这个方案更加智能，以webpack为例。首先，它是预编译的，不需要在浏览器中加载解释器。另外，你在本地直接写JS，不管是 AMD / CMD / ES6 风格的模块化，它都能认识，并且编译成浏览器认识的JS
